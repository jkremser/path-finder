% ------------------------------------------------------------
% Autogenerated LaTeX file for books
% db2latex RELEASE: 0.8pre1
% db2latex VERSION: $Id: VERSION.xml,v 1.6 2004/01/31 12:47:11 j-devenish Exp $
% fithesis VERSION: 1.41
% ------------------------------------------------------------
\def\clsclass{rapport3}
\documentclass{fithesis}
% --------------------------------------------
% MetaFont and MetaPost logo support
% --------------------------------------------
\usepackage{mflogo}
% --------------------------------------------
% Load fithesis param 
% --------------------------------------------
\thesistitle{Systém pro vyhledávání dopravního spojení v~rámci IDS JMK}
\thesissubtitle{Bakaláøská práce}
\thesisstudent{Jiøí Kremser}
\thesiswoman{false}
\thesislang{cs}
\thesisyear{2008}
\thesisfaculty{fi}
\thesisadvisor{RNDr. Tomá¹ Pitner, Ph.D.}
% --------------------------------------------
\label{id4478627}\usepackage{ifthen}
% --------------------------------------------
% Check for PDFLaTeX/LaTeX 
% --------------------------------------------
\newif\ifpdf
\ifx\pdfoutput\undefined
\pdffalse % we are not running PDF\LaTeX 
\else
\pdfoutput=1 % we are running PDF\LaTeX 
\pdftrue
\fi
% --------------------------------------------
% Load graphicx package with pdf if needed 
% --------------------------------------------
\ifpdf
\usepackage[pdftex]{graphicx}
\pdfcompresslevel=9
\else
\usepackage{graphicx}
\fi
\usepackage{anysize}
\marginsize{3cm}{2.5cm}{3.5cm}{3.5cm}

\makeatletter
% redefine the listoffigures and listoftables so that the name of the chapter
% is printed whenever there are figures or tables from that chapter. encourage
% pagebreak prior to the name of the chapter (discourage orphans).
\let\save@@chapter\@chapter
\let\save@@l@figure\l@figure
\let\the@l@figure@leader\relax
\def\@chapter[#1]#2{\save@@chapter[{#1}]{#2}%
\addtocontents{lof}{\protect\def\the@l@figure@leader{\protect\pagebreak[0]\protect\contentsline{chapter}{\protect\numberline{\thechapter}#1}{}{\thepage}}}%
\addtocontents{lot}{\protect\def\the@l@figure@leader{\protect\pagebreak[0]\protect\contentsline{chapter}{\protect\numberline{\thechapter}#1}{}{\thepage}}}%
}
\renewcommand*\l@figure{\the@l@figure@leader\let\the@l@figure@leader\relax\save@@l@figure}
\let\l@table\l@figure
\makeatother
\usepackage{fancyhdr}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
% Safeguard against long headers.
\IfFileExists{truncate.sty}{
\usepackage{truncate}
% Use an ellipsis when text would be larger than x% of the text width.
% Preserve left/right text alignment using \hfill (works for English).
\fancyhead[ol]{\truncate{0.49\textwidth}{\sl\leftmark}}
\fancyhead[er]{\truncate{0.49\textwidth}{\hfill\sl\rightmark}}
\fancyhead[el]{\truncate{0.49\textwidth}{\sl\leftmark}}
\fancyhead[or]{\truncate{0.49\textwidth}{\hfill\sl\rightmark}}
}{\typeout{WARNING: truncate.sty wasn't available and functionality was skipped.}}
\pagestyle{fancy}
% ---------------------- 
% Most Common Packages   
% ---------------------- 
\usepackage{latexsym}         
\usepackage{enumerate}         
\usepackage{fancybox}      
\usepackage{float}       
\usepackage{ragged2e}       
\usepackage{fancyvrb}         
\makeatletter\@namedef{FV@fontfamily@default}{\def\FV@FontScanPrep{}\def\FV@FontFamily{}}\makeatother
\fvset{obeytabs=true,tabsize=3}
\makeatletter
\let\dblatex@center\center\let\dblatex@endcenter\endcenter
\def\dblatex@nolistI{\leftmargin\leftmargini\topsep\z@ \parsep\parskip \itemsep\z@}
\def\center{\let\@listi\dblatex@nolistI\@listi\dblatex@center\let\@listi\@listI\@listi}
\def\endcenter{\dblatex@endcenter}
\makeatother
\usepackage{rotating}         
\usepackage{subfigure}         
\usepackage{tabularx}         
\usepackage{url}         
% --------------------------------------------
% Load hyperref package with pdf if needed 
% --------------------------------------------
\ifpdf
\usepackage[pdftex,bookmarksnumbered,colorlinks,backref,bookmarks,breaklinks,linktocpage,plainpages=false, pdfstartview=FitH, plainpages=false, pdfpagelabels, unicode]{hyperref}
\else
\usepackage[bookmarksnumbered,colorlinks,backref,bookmarks,breaklinks,linktocpage,plainpages=false, plainpages=false, pdfpagelabels]{hyperref}
\fi
% --------------------------------------------
% ----------------------------------------------
% Define a new LaTeX environment (adminipage)
% ----------------------------------------------
\newenvironment{admminipage}%
{ % this code corresponds to the \begin{adminipage} command
 \begin{Sbox}%
 \begin{minipage}%
} %done
{ % this code corresponds to the \end{adminipage} command
 \end{minipage}
 \end{Sbox}
 \fbox{\TheSbox}
} %done
% ----------------------------------------------
% Define a new LaTeX length (admlength)
% ----------------------------------------------
\newlength{\admlength}
% ----------------------------------------------
% Define a new LaTeX environment (admonition)
% With 2 parameters:
% #1 The file (e.g. note.pdf)
% #2 The caption
% ----------------------------------------------
\newenvironment{admonition}[2] 
{ % this code corresponds to the \begin{admonition} command
 \hspace{0mm}\newline\hspace*\fill\newline
 \noindent
 \setlength{\fboxsep}{5pt}
 \setlength{\admlength}{\linewidth}
 \addtolength{\admlength}{-10\fboxsep}
 \addtolength{\admlength}{-10\fboxrule}
 \admminipage{\admlength}
 {\bfseries \sc\large{#2}} \newline
 \\[1mm]
 \sffamily
 \includegraphics[width=1cm]{#1}
 \addtolength{\admlength}{-1cm}
 \addtolength{\admlength}{-20pt}
 \begin{minipage}[lt]{\admlength}
 \parskip=0.5\baselineskip \advance\parskip by 0pt plus 2pt
} %done
{ % this code corresponds to the \end{admonition} command
 \vspace{5mm} 
 \end{minipage}
 \endadmminipage
 \vspace{.5em}
 \par
}
% --------------------------------------------
% Commands to manage/style/create floats      
% figures, tables, algorithms, examples, eqn  
% --------------------------------------------
 \floatstyle{plain}
 \restylefloat{figure}
 \floatstyle{plain}
 \restylefloat{table}
 \floatstyle{plain}
 \newfloat{program}{ht}{lop}[section]
 \floatstyle{plain}
 \newfloat{example}{ht}{loe}[section]
 \floatname{example}{Pøíklad}
 \floatstyle{plain}
 \newfloat{dbequation}{ht}{loe}[section]
 \floatname{dbequation}{Rovnice}
 \floatstyle{boxed}
 \newfloat{algorithm}{ht}{loa}[section]
 \floatname{algorithm}{Algorithm}
\ifpdf
\DeclareGraphicsExtensions{.pdf,.png,.jpg}
\else
\DeclareGraphicsExtensions{.eps}
\fi
% --------------------------------------------
% $latex.caption.swapskip enabled for $formal.title.placement support
\newlength{\docbooktolatextempskip}
\newcommand{\captionswapskip}{\setlength{\docbooktolatextempskip}{\abovecaptionskip}\setlength{\abovecaptionskip}{\belowcaptionskip}\setlength{\belowcaptionskip}{\docbooktolatextempskip}}
\usepackage[czech]{babel} 
% Guard against a problem with old package versions.
\makeatletter
\AtBeginDocument{
\DeclareRobustCommand\ref{\@refstar}
\DeclareRobustCommand\pageref{\@pagerefstar}
}
\makeatother
% --------------------------------------------
\makeatletter
\newcommand{\dbz}{\penalty \z@}
\newcommand{\docbooktolatexpipe}{\ensuremath{|}\dbz}
\newskip\docbooktolatexoldparskip
\newcommand{\docbooktolatexnoparskip}{\docbooktolatexoldparskip=\parskip\parskip=0pt plus 1pt}
\newcommand{\docbooktolatexrestoreparskip}{\parskip=\docbooktolatexoldparskip}
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else\hbox{}\thispagestyle{empty}\newpage\if@twocolumn\hbox{}\newpage\fi\fi\fi}
\usepackage[latin2]{inputenc}
\usepackage[T1]{fontenc}

\ifx\dblatex@chaptersmark\@undefined\def\dblatex@chaptersmark#1{\markboth{\MakeUppercase{#1}}{}}\fi
\let\save@makeschapterhead\@makeschapterhead
\def\dblatex@makeschapterhead#1{\vspace*{-80pt}\save@makeschapterhead{#1}}
\def\@makeschapterhead#1{\dblatex@makeschapterhead{#1}\dblatex@chaptersmark{#1}}

\AtBeginDocument{\ifx\refname\@undefined\let\docbooktolatexbibname\bibname\def\docbooktolatexbibnamex{\bibname}\else\let\docbooktolatexbibname\refname\def\docbooktolatexbibnamex{\refname}\fi}
% Facilitate use of \cite with \label
\newcommand{\docbooktolatexbibaux}[2]{%
  \protected@write\@auxout{}{\string\global\string\@namedef{docbooktolatexcite@#1}{#2}}
}
% Provide support for bibliography `subsection' environments with titles
\newenvironment{docbooktolatexbibliography}[3]{
   \begingroup
   \let\save@@chapter\chapter
   \let\save@@section\section
   \let\save@@@mkboth\@mkboth
   \let\save@@bibname\bibname
   \let\save@@refname\refname
   \let\@mkboth\@gobbletwo
   \def\@tempa{#3}
   \def\@tempb{}
   \ifx\@tempa\@tempb
      \let\chapter\@gobbletwo
      \let\section\@gobbletwo
      \let\bibname\relax
   \else
      \let\chapter#2
      \let\section#2
      \let\bibname\@tempa
   \fi
   \let\refname\bibname
   \begin{thebibliography}{#1}
}{
   \end{thebibliography}
   \let\chapter\save@@chapter
   \let\section\save@@section
   \let\@mkboth\save@@@mkboth
   \let\bibname\save@@bibname
   \let\refname\save@@refname
   \endgroup
}

%\usepackage{cite}
%\renewcommand\citeleft{(}  % parentheses around list
%\renewcommand\citeright{)} % parentheses around list
\newcommand{\docbooktolatexcite}[2]{%
  \@ifundefined{docbooktolatexcite@#1}%
  {\cite{#1}}%
  {\def\@docbooktolatextemp{#2}\ifx\@docbooktolatextemp\@empty%
   \cite{\@nameuse{docbooktolatexcite@#1}}%
   \else\cite[#2]{\@nameuse{docbooktolatexcite@#1}}%
   \fi%
  }%
}
\newcommand{\docbooktolatexbackcite}[1]{%
  \ifx\Hy@backout\@undefined\else%
    \@ifundefined{docbooktolatexcite@#1}{%
      % emit warning?
    }{%
      \ifBR@verbose%
        \PackageInfo{backref}{back cite \string`#1\string' as \string`\@nameuse{docbooktolatexcite@#1}\string'}%
      \fi%
      \Hy@backout{\@nameuse{docbooktolatexcite@#1}}%
    }%
  \fi%
}

% --------------------------------------------
% A way to honour <footnoteref>s
% Blame j-devenish (at) users.sourceforge.net
% In any other LaTeX context, this would probably go into a style file.
\newcommand{\docbooktolatexusefootnoteref}[1]{\@ifundefined{@fn@label@#1}%
  {\hbox{\@textsuperscript{\normalfont ?}}%
    \@latex@warning{Footnote label `#1' was not defined}}%
  {\@nameuse{@fn@label@#1}}}
\newcommand{\docbooktolatexmakefootnoteref}[1]{%
  \protected@write\@auxout{}%
    {\global\string\@namedef{@fn@label@#1}{\@makefnmark}}%
  \@namedef{@fn@label@#1}{\hbox{\@textsuperscript{\normalfont ?}}}%
  }

\makeindex
% index labeling helper
\newif\ifdocbooktolatexprintindex\docbooktolatexprintindextrue
\let\dbtolatex@@theindex\theindex
\let\dbtolatex@@endtheindex\endtheindex
\@ifundefined{@openrighttrue}{\newif\if@openright}{}
\def\theindex{\relax}
\def\endtheindex{\relax}
\newenvironment{dbtolatexindex}[2]
   {
\if@openright\cleardoublepage\else\clearpage\fi
\let\dbtolatex@@indexname\indexname
\def\dbtolatex@current@indexname{#2}
\ifx\dbtolatex@current@indexname\@empty                                                                                             \def\dbtolatex@current@indexname{\dbtolatex@@indexname}
\fi
\def\dbtolatex@indexlabel{%
 \ifnum \c@secnumdepth >\m@ne \ifx\c@chapter\undefined\refstepcounter{section}\else\refstepcounter{chapter}\fi\fi%
 \label{#1}\hypertarget{#1}{\dbtolatex@current@indexname}%
 \global\docbooktolatexprintindexfalse}
\def\indexname{\ifdocbooktolatexprintindex\dbtolatex@indexlabel\else\dbtolatex@current@indexname\fi}
\dbtolatex@@theindex
   }
   {
\dbtolatex@@endtheindex\let\indexname\dbtolatex@@indexname
   }

\newlength\saveparskip \newlength\saveparindent
\newlength\tempparskip \newlength\tempparindent

\def\docbooktolatexgobble{\expandafter\@gobble}
% Prevent multiple openings of the same aux file
% (happens when backref is used with multiple bibliography environments)
\ifx\AfterBeginDocument\undefined\let\AfterBeginDocument\AtBeginDocument\fi
\AfterBeginDocument{
   \let\latex@@starttoc\@starttoc
   \def\@starttoc#1{%
      \@ifundefined{docbooktolatex@aux#1}{%
         \global\@namedef{docbooktolatex@aux#1}{}%
         \latex@@starttoc{#1}%
      }{}
   }
}
% --------------------------------------------
% Hacks for honouring row/entry/@align
% (\hspace not effective when in paragraph mode)
% Naming convention for these macros is:
% 'docbooktolatex' 'align' {alignment-type} {position-within-entry}
% where r = right, l = left, c = centre
\newcommand{\docbooktolatex@align}[2]{\protect\ifvmode#1\else\ifx\LT@@tabarray\@undefined#2\else#1\fi\fi}
\newcommand{\docbooktolatexalignll}{\docbooktolatex@align{\raggedright}{}}
\newcommand{\docbooktolatexalignlr}{\docbooktolatex@align{}{\hspace*\fill}}
\newcommand{\docbooktolatexaligncl}{\docbooktolatex@align{\centering}{\hfill}}
\newcommand{\docbooktolatexaligncr}{\docbooktolatex@align{}{\hspace*\fill}}
\newcommand{\docbooktolatexalignrl}{\protect\ifvmode\raggedleft\else\hfill\fi}
\newcommand{\docbooktolatexalignrr}{}
\ifx\captionswapskip\@undefined\newcommand{\captionswapskip}{}\fi
\makeatother
\title{\bfseries Systém pro vyhledávání dopravního spojení v~rámci IDS JMKÚvodJava MEPráce s~daty v~Java MEVyhledávací algoritmyAnalýzaKonvertor datVyhledávaèZávìrPodoba aplikacíObsah CD\\[12pt]\normalsize Bakaláøská práce}
\author{Jiøí Kremser}
% --------------------------------------------
\makeglossary
% --------------------------------------------

\setcounter{tocdepth}{4}

\setcounter{secnumdepth}{4}
\addto\captionsczech{\def\indexname{Rejst\v{r}\'{\i}k}}
\addto\captionsczech{\def\appendixname{P\v{r}\'{i}loha}}
\addto\captionsczech{\def\refname{Literatura}}
\begin{document}
% --------------------------------------------
% Useing fithesis
% --------------------------------------------
\FrontMatter
\ThesisTitlePage
\begin{ThesisDeclaration}
\DeclarationText
\AdvisorName
\end{ThesisDeclaration}

% --------------------------------------------
% Thanks 
% --------------------------------------------
\begin{ThesisThanks}
Chtìl bych podìkovat svému vedoucímu práce RNDr. Tomá¹i Pitnerovi, Ph.D. za jeho vedení a Vladimíru Dopitovi za poskytnutí dat a informací o~nich. Rád bych také podìkoval kamarádùm, kteøí mi poskytli svùj mobilní telefon na otestování aplikace.\end{ThesisThanks}

% --------------------------------------------
% Abstract 
% --------------------------------------------
\begin{ThesisAbstract}

Potøeba èlovìka být vèas na správném místì je v~dne¹ní uspìchané dobì zøejmá. S~vyu¾itím mobilních zaøízení si mù¾e ka¾dý nosit jízdní øády s~sebou. Cílem této práce je popsat platformu Java ME a implementovat aplikaci, která pomáhá u¾ivateli zorientovat se v~pøíli¹ komplexních slu¾bách IDS JMK. Aplikace slou¾í jako vyhledávaè spojù v~dopravní síti.
\end{ThesisAbstract}

% --------------------------------------------
% KeyWords 
% --------------------------------------------
\begin{ThesisKeyWords}
vyhledávaè, IDS JMK, mobilní zaøízení, Java ME, MIDP 2.0, CLDC 1.1\end{ThesisKeyWords}

\makeatletter
\def\dbtolatex@contentsid{id4679358}
\def\dbtolatex@@contentsname{\latex@@contentsname}
\let\latex@@contentsname\contentsname
\newif\ifdocbooktolatexcontentsname\docbooktolatexcontentsnametrue
\def\dbtolatex@contentslabel{%
 \label{\dbtolatex@contentsid}\hypertarget{\dbtolatex@contentsid}{\dbtolatex@@contentsname}%
 \global\docbooktolatexcontentsnamefalse}
\def\contentsname{\ifdocbooktolatexcontentsname\dbtolatex@contentslabel\else\dbtolatex@@contentsname\fi}
\let\save@@@mkboth\@mkboth
\let\@mkboth\@gobbletwo
\tableofcontents
\let\@mkboth\save@@@mkboth
\let\contentsname\latex@@contentsname
\Hy@writebookmark{}{\dbtolatex@@contentsname}{\dbtolatex@contentsid}{0}{toc}%
\makeatother
				\MainMatter

% -------------------------------------------------------------
% Chapter Úvod 
% ------------------------------------------------------------- 	
\chapter{Úvod}
\label{ch01}\hypertarget{ch01}{}%

V~nìkolika posledních desetiletích za¾ila mobilní zaøízení obrovský vývoj. Telefony dnes ji¾ neslou¾í pouze ke komunikaci. Spoleènì se zaøízeními PDA otevøely vývojáøùm nové pole pùsobnosti. S~nástupem Javy na tuto platformu tak mohou vznikat u¾iteèné aplikace usnadòující bì¾ný ¾ivot. Tato bakaláøská práce popí¹e vývoj právì jedné takové mobilní aplikace.

% ------------------------   
% Section 
\section{Vyhledávaè spojù}
\label{sec0101}\hypertarget{sec0101}{}%

Zadáním je vytvoøit aplikaci pro vyhledávání dopravních spojù. V¹echna øe¹ení, která jsou v~souèasné dobì k~dispozici pro vyhledávání spojù, buï vy¾adují online pøipojení, nebo jsou urèeny jen pro Brno. Moje aplikace si klade za cíl být offline variantou, která bude vyhledávat spoje i pro okolí Brna.

Offline varianta má tu výhodu, ¾e její pou¾ívání je zcela zdarma. Nevýhodou je hor¹í aktualizovatelnost, proto¾e data nejsou centralizovaná. IDS JMK na¹tìstí jízdní øády nemìní pøíli¹ èasto, navíc aplikace bude obsahovat u¾ nové jízdní øády pro rok 2008.

Pro snadnìj¹í aktualizaci dat je spoleènì s~aplikací vyhledávaèe vyvinuta aplikace konvertor, která sestaví aplikaci vyhledávaèe v¾dy z~aktuálních dat ze systému IDS JMK.

% ------------------------   
% Section 
\section{Struktura této práce}
\label{sec0102}\hypertarget{sec0102}{}%

Tato bakaláøská práce se nesna¾í být kompletní pøíruèkou pro platformu Java ME. Zamìøuje se na témata, která mají co do èinìní s~øe¹eným problémem. V~druhé kapitole jsou struènì popsány architektura mikro edice Javy, distribuce aplikací a nástroje usnadòující vývoj. Tøetí kapitola má za cíl probrat mo¾nosti Javy ME pro ukládání vìt¹ího objemu dat, co¾ je v~pøípadì aplikace pro vyhledávání spojù potøeba. Následuje kapitola o~vyhledávání v~grafech. Pátá kapitola se zabývá analýzou øe¹eného problému a popisuje, jak je mo¾né vyu¾ít technologie popsané v~pøedchozích kapitolách. Zbylé kapitoly popisují samotné aplikace.

% -------------------------------------------------------------
% Chapter Java ME 
% ------------------------------------------------------------- 	
\chapter{Java ME}
\label{ch02}\hypertarget{ch02}{}%

% ------------------------   
% Section 
\section{Historie}
\label{sec0201}\hypertarget{sec0201}{}%

Podnìtem ke vzniku programovacího jazyka, byl vývoj aplikace pro pøenosný ovladaè domácích spotøebièù. Projekt se jmenoval Stealth Project (pozdìji Green Project) a èlenem jeho týmu byl i zakladatel jazyka Oak James Gosling. Potøeba nového jazyka pramenila ze zku¹eností s~jazykem C++, který byl velmi náchylný k~programátorským chybám. Oak byl navr¾en tak, aby co nejvíce chyb zachytil u¾ pøi kompilaci a nedovoloval programátorovi pracovat s~ukazateli a správou pamìti \docbooktolatexcite{[1]}{}.

Zaøízení pro ovládání domácích spotøebièù se pro malou poptávku nezaèalo nikdy sériovì vyrábìt. Spoleènost Sun Microsystems, její¾ byl Gosling èlenem, pøejmenovala v~roce 1995 kvùli kolizi jmen s~jiným produktem jazyk Oak na Java. Spoleènost Netscape Javu integrovala do svých prohlí¾eèù a svìtlo svìta spatøily první aplety.

Java se stávala stále oblíbenìj¹í, proto¾e se øídila podle filozofie WORA (Write once, run anywhere). Multiplatformnost byla jednou z~hlavních priorit. Platforma Javy se s~pøidáváním dal¹ích knihoven stále zvìt¹ovala, proto se od verze 2 roz¹tìpila na platformy J2ME (Java 2 Micro Edition), J2SE (Java 2 Standard Edition) a J2EE (Java 2 Enterprise Edition).

J2ME platforma je velmi rozmanitá, proto obsahuje sadu specifikací, které popisují v¾dy jen èást platformy. Konfigurace tak vymezují minimální mno¾inu vlastností pro danou tøídu zaøízení a je roz¹iøována jedním nebo více profily.

S~vydáním Javy verze 5 byly platformy pøejmenovány na Java ME, Java SE a Java EE.

Pøed nedávnem vydala spoleènost Google své øe¹ení mobilní platformy s~názvem Android. Zdrojové kódy pro platformu Android se pí¹í také v~jazyce Java. Android v¹ak nevyu¾ívá k~interpretaci kódu referenèní implementaci Virtual Machine od spoleènosti Sun, nýbr¾ svou vlastní implementaci Dalvik VM \docbooktolatexcite{[b]}{}.

% ------------------------   
% Section 
\section{Konfigurace}
\label{sec0202}\hypertarget{sec0202}{}%

Konfigurace je minimálním spoleèným jmenovatelem pro urèitou tøídu zaøízení. Obsahuje VM (Virtual Machine) a základní Java ME API.

\begin{description}
% \null and \mbox are tricks to induce different typesetting decisions
\item[{CLDC}]\null{}
Connected Limited Device Configuration je nejmen¹í definovaná konfigurace zamìøená na zaøízení s~malým mno¾stvím pamìti. Minimální hodnoty jsou uvedeny ní¾e.

\begin{itemize}
%--- Item
\item 
128 kB pamìti pro ulo¾ení VM a tøíd, je¾ tvoøí platformu CLDC.

%--- Item
\item 
32 kB operaèní pamìti.

\end{itemize}
\noindent 
Tøídy, které jsou souèástí konfigurace, se nacházejí v~balíècích \docbooktolatexcite{[8]}{}.

\begin{itemize}
%--- Item
\item 
javax.microedirion.io

%--- Item
\item 
java.io

%--- Item
\item 
java.util

%--- Item
\item 
java.lang

\end{itemize}
\noindent 
Balíèky nejsou plnohodnotné varianty Java SE, ale znaènì ochuzené verze.

Specifikace JSR--139 (CLDC 1.1) dává výrobcùm velkou volnost v~její implementaci. Zaøízení nemusí mít displej, dokonce ani klávesnici. Referenèní implementace CLDC od spoleènosti Sun obsahuje Virtual Machine s~názvem KVM. Sun také nabízí implementaci s~HotSpot pøekladaèem.
% \null and \mbox are tricks to induce different typesetting decisions
\item[{CDC}]\null{}
Connected Device Configuration je konfigurace pro výkonnìj¹í zaøízení s~vìt¹ími prostøedky. Obvykle pro PDA, chytré telefony a jiné. Vyplòuje tak místo mezi CLDC a Java SE.

Minimální po¾adavky na zaøízení.

\begin{itemize}
%--- Item
\item 
256 kB pamìti ROM pro platformu.

%--- Item
\item 
512 kB operaèní pamìti.

\end{itemize}
\noindent 
Referenèní implementace VM se nazývá CVM\label{id4682097}\begingroup\catcode`\#=12\footnote{
Zkratky KVM a CVM nemají ¾ádný význam. Døíve znamenali \glqq Kilobyte\textquotedblleft{} a \glqq Compact\textquotedblleft{}, ale od jejich pou¾ívání se upustilo.
}\endgroup\docbooktolatexmakefootnoteref{id4682097}. Od verze 1.1.1 obsahuje HotSpot pøekladaè. Pøibyli plnohodnotná podpora pro reflexi, práci se sítí, kolekce a jiné. Souèástí konfigurace není napøíklad Swing, který v¹ak lze získat pou¾itím profilu Personal profile 1.1 a volitelného balíèku AGUI (JSR--209). Souèasná verze je CDC 1.1.2 odpovídající JSR--218.
\end{description}
\noindent 
% ------------------------   
% Section 
\section{Profily}
\label{sec0203}\hypertarget{sec0203}{}%

Roz¹iøují vlastnosti konfigurace o~nové API.

\begin{itemize}
%--- Item
\item 
{\bfseries{CDC}}

\begin{itemize}
%--- Item
\item 
Foundation Profile

%--- Item
\item 
Personal Basis Profile

%--- Item
\item 
Personal Profile

\end{itemize}
\noindent 

%--- Item
\item 
{\bfseries{CLDC}}

\begin{itemize}
%--- Item
\item 
Personal Digital Assistant Profile

%--- Item
\item 
Information Module Profile

%--- Item
\item 
Mobile Information Device Profile -- {\bfseries{MIDP}}

\end{itemize}
\noindent 
\end{itemize}
\noindent 
Profil MIDP je urèen pro mobilní telefony a obsahuje funkcionalitu pro tvorbu u¾ivatelského rozhraní, her, práci se sítí a funkce trvalého ukládání záznamù. Aplikace jsou nazývány {\em{midlety}} podle tøídy {\texttt{{MIDlet}}}. Souèasná verze specifikace je 2.1, vìt¹ina stávajících zaøízení v¹ak podporuje verzi 2.0 \docbooktolatexcite{[a]}{}.

% ------------------------   
% Section 
\section{Volitelné balíèky}
\label{id4682253}\hypertarget{id4682253}{}%

Roz¹iøují platformu konfigurace s~profilem o~API pro specifické úèely. Nejsou souèástí profilu, proto¾e vy¾adují pøístup ke specifickým funkcím zaøízení. Pøehled nìkterých volitelných balíèkù je na obrázku \hyperlink{obr2.1}{{\ref{obr2.1}}}, souèasnì je zde znázornìno, které balíèky musí být pøidány k~dané konfiguraci, aby mohlo být výsledné spojení nazváno platformou MSA (Mobile Service Architecture) resp. JTWI (Java Technology for the Wireless Industry). Výrobci je nejsou povinni implementovat do svých zaøízení.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{obr2.1}{}%
\begin{center}

{{\includegraphics[scale=0.55]{./Javame}}\hypertarget{id4678403}{}%
\label{id4678403}
}
{{\caption[{Schéma Java ME}]{{{Schéma Java ME}}}\label{obr2.1}}}
\end{center}
\end{figure}

% ------------------------   
% Section 
\section{Midlet}
\label{id4678415}\hypertarget{id4678415}{}%

Midlet musí dìdit od abstraktní tøídy {\texttt{{javax.microedition.midlet.MIDlet}}} a implementovat její metody pro øízení ¾ivotního cyklu midletu. Cyklus øídí AMS (application management software). Midlet tak zprostøedkovává rozhraní mezi aplikací a runtime prostøením telefonu.

Midlet mù¾e být pozastaven napøíklad v~pøípadì, dojde-li k~uskuteènìní telefonního hovoru za bìhu aplikace, a následnì zase obnoven. Volání tìchto metod je v~kompetenci AMS a je znázornìno na obrázku \hyperlink{obr2.2}{{\ref{obr2.2}}}.

Midlet musí být umístìn v~{\texttt{{jar}}} archivu aplikace a popsán v~{\texttt{{jad}}} deskriptoru. Obsahuje-li archiv {\texttt{{jar}}} více midletù, jedná se o~tzv. sadu midletù.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{obr2.2}{}%
\begin{center}

{{\includegraphics[scale=0.4]{./States}}\hypertarget{id4678509}{}%
\label{id4678509}
}
{{\caption[{®ivotní cyklus midletu}]{{{®ivotní cyklus midletu}}}\label{obr2.2}}}
\end{center}
\end{figure}

% ------------------------   
% Section 
\section{Jar, Jad, distribuce}
\label{id4678521}\hypertarget{id4678521}{}%

V¹echny midlety, je¾ mají být souèástí sady midletù, musí být spoleènì s~dal¹ími soubory, které aplikace vyu¾ívá, umístìny v~jediném {\texttt{{jar}}} archivu. Strukturu tohoto archivu popisuje soubor {\texttt{{manifest.mf}}}, který je zabalený rovnì¾ uvnitø archivu. V~manifestu jsou popsány cesty ke \glqq spustitelným\textquotedblleft{} tøídám. Ve standardní edici jsou popsány cesty k~tøídám, je¾ obsahují statickou metodu main. V~mikro edici jsou to cesty k~jednotlivým midletùm. Souèástmi manifestu jsou dodateèné meta informace, které popisují aplikaci a mohou být spoleèné i pro {\texttt{{jad}}} deskriptor. Jedná se o~ikony jednotlivých midletù, název sady midletù, verze sady midletù, konfigurace, profil a dal¹í.

Soubor {\texttt{{jad}}} (Java Application Descriptor) je umístìn vnì archivu a byl navr¾en pro sí»ové prostøedí, kde si u¾ivatel nejprve stáhne malé mno¾ství informací, které popisuje aplikaci, a teprve potom vlastní aplikaci. Deskriptor tedy musí obsahovat URL {\texttt{{jar}}} archivu, jeho velikost, verzi a dal¹í. Vhodné je také pøidat popis, který se u¾ivateli zobrazí je¹tì pøed instalací sady midletù. Deskriptor také mù¾e obsahovat volitelné atributy {\texttt{{MIDlet-Delete-Notify}}} a {\texttt{{MIDlet-Install-Notify}}}, které zajistí poslání HTTP po¾adavku na pøíslu¹ný servlet \docbooktolatexcite{[7]}{}.

Distribuce probíhá tak, ¾e oba soubory se umístí na internet a u¾ivatel prostøednictvím protokolu WAP nebo GPRS aplikaci stáhne. Klient mù¾e obsahovat také DA (discovery application), která slou¾í jako portál k~jednotlivým midletùm. Minimální konfigurace serverové èásti zahrnuje nastavení MIME typù souborù.

% tabular ------------------------------------------------------
\begin{center}
\label{id4678626}\hypertarget{id4678626}{}%
\begin{tabular}{|c|c|}
\hline 
{{{\bfseries{Typ souboru}}}} & {{{\bfseries{MIME typ}}}} \tabularnewline
 \hline 
{{JAR}} & {{{\texttt{{application/java-archive}}}}} \tabularnewline
 \hline 
{{JAD}} & {{{\texttt{{text/vnd.sun.j2me.app-descriptor}}}}} \tabularnewline
\hline 
\end{tabular}
\end{center}

% ------------------------   
% Section 
\section{Podpora}
\label{id4678678}\hypertarget{id4678678}{}%

Podpora pro vývoj mobilních aplikací je pomìrnì na vysoké úrovni. Vývojová prostøedí poskytují jednoduchý zpùsob, jak aplikaci navrhnout. Napøíklad podpora v~Netbeans s~nainstalovanou podporou pro mobilní aplikace zahrnuje vizuální návrháø pro tok aplikace i samostatné formuláøe. Pro Eclipse je vyvíjen zásuvný modul s~názvem EclipseME. Obì tyto IDE podporují Sun Java Wireless Toolkit.

Podpora ze strany výrobcù mobilních zaøízení spoèívá ve vytváøení nástrojù pro usnadnìní vývoje aplikací urèených právì pro jejich znaèku. Tyto sady nástrojù obvykle obsahují emulátor dané znaèky a lze je integrovat s~obìma zmínìnými IDE.
\subsection{Sun Java Wireless Toolkit}
\label{id4678712}\hypertarget{id4678712}{}%

Sada nástrojù pro vývoj mobilních aplikací dodávaná spoleèností Sun se nazývá Sun Java Wireless Toolkit. Souèástí sady jsou emulátory, které zapouzdøují referenèní implementace obou konfigurací a nìkterých profilù, a software pro správu aplikací (AMS). Obsahuje také jednoduché vývojové prostøedí s~debuggerem a rùzné u¾iteèné programy. Napøíklad nástroj pro správu certifikátù s~veøejnými klíèi, profiler, monitor pamìti a dal¹í \docbooktolatexcite{[1]}{}. Midlety toti¾ mohou být podepisovány.

% -------------------------------------------------------------
% Chapter Práce s daty v Java ME 
% ------------------------------------------------------------- 	
\chapter{Práce s~daty v~Java ME}
\label{ch03}\hypertarget{ch03}{}%

Java ME je navr¾ena zejména pro hry a aplikace vyu¾ívající sí». Tvorbou her se tato práce zabývat nebude. Není-li aplikace pøipojena k~síti, je potøeba dodat data jiným zpùsobem. Obecnì lze uchovávání dat rozdìlit, ve smyslu následné mìnitelnosti dat, na uchovávání ve \glqq statických\textquotedblleft{} a \glqq dynamických\textquotedblleft{} úlo¾i¹tích.

Statické úlo¾i¹tì poskytuje data v~prùbìhu èasu stále konstantní. Staèí pouze mechanizmus na jejich ètení. Není proto tøeba øe¹it mo¾né inkonzistence zpùsobené operacemi nad daty. Cenou za tuto vlastnost je ov¹em jejich statiènost a vìt¹inou i potøeba jejich integrace do systému. Jejich aktualizace není snadná a závisí hodnì na implementaèních detailech úlo¾i¹tì.

Dynamické úlo¾i¹tì umo¾òuje v¹echny CRUD operace. Tento model pokrývá vìt¹í problémovou doménu ne¾ pøedchozí, ale nese se sebou také nutnost o¹etøit zpracovávání transakcí v~multiu¾ivatelském prostøedí. Jeho nejèastìj¹ími zástupci jsou rùzné relaèní a objektové databáze.

Java ME poskytuje jen nìkolik zpùsobù, jak je mo¾né data ukládat. ®ádá-li si aplikace pracovat pouze se statickým úlo¾i¹tìm, jsou k~dispozici resources, ukládání dat do konstant a descriptoru. Zástupci dynamického úlo¾i¹tì jsou RMS nebo JDBC. JDBC API je souèástí specifikace JSR--169 (volitelný balíèek) a je urèeno pro konfiguraci CDC, proto nelze pou¾ít. Jednotlivé zpùsoby budou v~kapitole dále rozebrány.

% ------------------------   
% Section 
\section{RMS}
\label{sec0301}\hypertarget{sec0301}{}%

Systém pro ukládání dat (Record Management System) je urèený pro trvalé uchovávání a manipulaci s~daty. Je souèástí specifikace MIDP 2.0 a poskytuje programátorovi API pro práci s~daty. Pøístupovým bodem k~datùm je \glqq úlo¾i¹tì záznamù\textquotedblleft{} implementované tøídou {\texttt{{RecordStore}}}.

V~MIDP 2.0 je pøidána vlastnost sdílení úlo¾i¹» záznamù mezi rùznými sadami midletù. Úlo¾i¹tì je toti¾ jednoznaènì identifikováno názvem úlo¾i¹tì (maximálnì 32 znakù) a názvem sady midletù. V~praxi to znamená, ¾e mù¾e jedna aplikace slou¾it jako \glqq instalátor\textquotedblleft{} pro jinou aplikaci. Instalátor ve smyslu aplikace, která naplní úlo¾i¹tì daty. Tento pøístup je ale ne¹»astný hned v~nìkolika bodech.

\begin{itemize}
%--- Item
\item 
První aplikace musí data odnìkud také èerpat.

%--- Item
\item 
Zmìna dat mù¾e vy¾adovat zmìnu zdrojového kódu \glqq instalaèní\textquotedblleft{} aplikace.

%--- Item
\item 
Distribuce je problémová. Buï je \glqq instalaèní\textquotedblleft{} midlet souèástí stejné sady midletù. Potom bude nav¾dy zobrazován v~menu sady midletù. Nebo není souèástí stejné sady midletù a u¾ivatel je nucen \glqq zbyteèný\textquotedblleft{} midlet stáhnout, spustit a smazat.

\end{itemize}
\noindent 
RMS umo¾òuje programátorovi vytváøet, ru¹it, otvírat a zavírat úlo¾i¹tì. Úlo¾i¹tì mù¾e obsahovat mno¾inu záznamù. Záznamem mù¾e být jakýkoli proud bytù. RMS tedy nehlídá typ ukládaných dat. Vzhledem k~tomu, ¾e CLDC ani MIDP nepodporují serializaci objektù, je potøeba vlastní objekty serializovat ruènì pomocí {\texttt{{DataOutputStream}}} a {\texttt{{DataInputStream}}}, které umí serializovat primitivní datové typy a øetìzce.

Ka¾dému novému záznamu je pøidìlen identifikátor. Autoinkrementaci identifikátorù RMS zaji¹»uje, kvùli výkonnosti v¹ak nehlídá tvoøení \glqq dìr\textquotedblleft{} pøi odebírání záznamù. Nad záznamy lze iterovat prostøednictvím tøídy {\texttt{{RecordEnumeration}}}, definovat na nich uspoøádání díky tøídì {\texttt{{RecordComparator}}} nebo iterovat jen nìkterými ({\texttt{{RecordFilter}}}) \docbooktolatexcite{[2]}{}.

% ------------------------   
% Section 
\section{Konstanty a deskriptor}
\label{sec0303}\hypertarget{sec0303}{}%

Dal¹ím zpùsobem, jak lze aplikaci naplnit aplikaci daty, je ulo¾it je pøímo do souborù tøíd jako statické atributy. Modifikátor {\texttt{{final}}} zajistí jejich nemìnitelnost. Tato metoda dovoluje ukládat i binární data, kdy¾ se jako typ atributu zvolí pole bytù.

Toto øe¹ení zkomplikuje èitelnost kódu a zvìt¹í velikost souboru tøídy. Zpomalí také zavádìní tøídy do pamìti, ale proto¾e jsou atributy oznaèené modifikátorem {\texttt{{static}}}, není toto zpomalení dramatické. Aktualizovat automaticky takováto data je velmi obtí¾né.

Textová data mohou být ukládána do deskriptoru aplikace. Tato data lze získat metodou {\texttt{{getAppProperty(String key)}}} tøídy {\texttt{{MIDlet}}}. ®ádná metoda {\texttt{{setAppProperty()}}} není na tøídì {\texttt{{MIDlet}}} definována, proto lze data jen èíst. Binární data lze kódovat metodou Base64, ale jeliko¾ deskriptor není souèástí archivu, není komprimován a metoda Base64 zbyteènì velikost deskriptoru zvìt¹í. Deskriptor mù¾e mít na rùzných zaøízeních rùznou maximální velikost.

% ------------------------   
% Section 
\section{Resources}
\label{sec0304}\hypertarget{sec0304}{}%

Jakékoli soubory uvnitø archivu {\texttt{{jar}}} se nazývají resources. Mù¾e se jednat o~jednoduché knihovny, multimediální soubory nebo binární data. V~aplikaci k~jejich naètení slou¾í metoda {\texttt{{getResourceAsStream(String path)}}}. Jedná se o~souèást Java Reflection API, je¾ sice celé není souèástí CLDC 1.1, ale nìkteré metody byly ponechány. Pøístupovým bodem k~metodì je tedy instance typu {\texttt{{Class}}}.

Jeliko¾ jsou soubory souèástí archivu, není snadná jejich modifikace. Ukládání dat do souborù je z~popsaných zpùsobù nejvhodnìj¹í, proto tuto metodu pou¾ívám ve své práci. Více je popsána mo¾nost aktualizace takovýchto dat v~kapitole 6.

% -------------------------------------------------------------
% Chapter Vyhledávací algoritmy 
% ------------------------------------------------------------- 	
\chapter{Vyhledávací algoritmy}
\label{ch04}\hypertarget{ch04}{}%

Vyhledávání v~grafu je podoborem teorie grafù a lze jej aplikovat na mnoho problémù z~bì¾ného ¾ivota, s~nimi¾ zdánlivì nesouvisí. Obecné vyhledávací algoritmy spojené s~heuristikou z~dané problémové domény ztratí na obecnosti, ale získají na efektivitì (slo¾itost algoritmu klesne). V~dne¹ní informaèní spoleènosti, kde správná informace dostupná vèas má cenu zlata, je jejich vyu¾itelnost obrovská.

\begin{itemize}
%--- Item
\item 
V~umìlé inteligenci je vyhledávání jedním z~klíèových prvkù. Budoucnost patøí sémantickým sítím a vyhledávacím agentùm nad nimi. Datové struktury navrhované v~minulých dekádách byly navrhovány pro co nejvìt¹í výkon, proto neobsahovaly ¾ádná metadata a proces vyhledávání nerozli¹oval informace podle kontextu výskytu. Dnes se tyto sémantické struktury (formáty) stávají bì¾nými.

\end{itemize}
\noindent 
\begin{itemize}
%--- Item
\item 
V~managementu velkých firem je nutnost být efektivnìj¹í ne¾ konkurence. I~tady mají vyhledávací a pøedev¹ím optimalizaèní algoritmy své místo. Sestaví-li se co nejvìrnìj¹í model problému a urèí pákové body, staèí v~takovémto modelu naleznout nejlacinìj¹í cestu ze stavu A~do stavu B. Bohu¾el sestavit vìrný model problému je velice obtí¾né a v~tìchto oblastech i subjektivní.

\end{itemize}
\noindent 
Souvislost hledání spoje v~dopravní síti s~hledáním nejkrat¹í cesty v~grafu je zøejmá, proto budou struènì rozebrány dva nejznámìj¹í algoritmy pro nejkrat¹í cestu grafem.

Ní¾e jsou uvedeny algoritmy, které nebudou probrány, ale doká¾í nejkrat¹í cestu nalézt.

\begin{itemize}
%--- Item
\item 
{\em{Algoritmus prohledávání grafu do ¹íøky}}

Realizován pomocí fronty. Nezohledòuje ceny hran.

\end{itemize}
\noindent 
\begin{itemize}
%--- Item
\item 
{\em{Algoritmus prohledávání grafu do hloubky}}

Realizován pomocí zásobníku. Nezohledòuje ceny hran.

\end{itemize}
\noindent 
\begin{itemize}
%--- Item
\item 
{\em{Bellman--Fordùv algoritmus}}

Realizován pomocí prioritní fronty. Doká¾e pracovat se zápornì ohodnocenými hranami.

\end{itemize}
\noindent 
% ------------------------   
% Section 
\section{Pojmy}
\label{id4746138}\hypertarget{id4746138}{}%

Vysvìtlení nìkolika pojmù z~teorie grafù. Není tøeba zabývat se nesouvislými grafy, proto¾e graf reprezentující dopravní sí» IDS JMK je souvislý.

\begin{itemize}
%--- Item
\item 
{\em{Graf}}

Graf je uspoøádaná dvojice{\texttt{{(V,E)}}}, kde {\texttt{{V}}} je neprázdná mno¾ina vrcholù (uzlù grafu) a {\texttt{{E}}} je mno¾ina dvojic prvkù z~{\texttt{{V}}}. Jsou-li dvojice uspoøádané, je graf orientovaný. Hrana vede mezi vrcholy {\texttt{{x}}} a {\texttt{{y}}} z~mno¾iny {\texttt{{V}}}, právì kdy¾ mno¾ina {\texttt{{E}}} obsahuje takovouto dvojici {\texttt{{(x,y)}}}. Je-li graf orientovaný, vede ¹ipka z~vrcholu {\texttt{{x}}} do vrcholu, ale nikoliv z~vrcholu {\texttt{{x}}} do vrcholu {\texttt{{y}}}.

\end{itemize}
\noindent 
\begin{itemize}
%--- Item
\item 
{\em{Multigraf}}

Mezi dvìma vrcholy mù¾e vést libovolný poèet hran.

\end{itemize}
\noindent 
\begin{itemize}
%--- Item
\item 
{\em{Ohodnocení hran}}

Existuje funkce, která ka¾dou hranu ohodnotí nìjakou informací, nejèastìji èíslem. Tuto informaci budu dále v~práci oznaèovat støídavì pojmy cena a délka.

\end{itemize}
\noindent 
\begin{itemize}
%--- Item
\item 
{\em{Cesta\hypertarget{sect040101}{}}}

Posloupnost, ve které se pravidelnì støídají vrcholy a hrany a symbolizuje pomyslný prùchod grafem po jednotlivých hranách vedoucích z~vrcholu do vrcholu. Cena cesty je potom souèet ohodnocení pro¹lých hran.

\end{itemize}
\noindent 
% ------------------------   
% Section 
\section{Floyd--Warshallùv algoritmus}
\label{sec0401}\hypertarget{sec0401}{}%

Floyd--Warshallùv (nebo také Roy--Floydùv) algoritmus nalezne nejkrat¹í cesty mezi v¹emi uzly v~orientovaném grafu. Vyu¾ívá matici souslednosti, její¾ hodnoty jsou ceny cest. Matice je reprezentována dvourozmìrným polem.

\begin{Verbatim}[fontsize=\small]
Pseudokód
 1  // Pøedpokládáme funkci cenaHrany(u, v) vracející cenu hrany z u do v
 2  // pokud hrana neexistuje, cenaHrany = nekoneèno
 3  // cenaHrany(u, u) = 0 
 4 
 5  int cesta[][]                     // Dvourozmìrné pole. 
 6  foreach (u, v) in (V):            // Inicializace                 
 7     d[u][v] := cenaHrany(u, v)     // Prvky d[u][v] jsou inicializovány
 8                                    // funkcí cenaHrany(u, v)
 9  procedure FloydWarshall(d):
10     for k := 1 to |V|:
11        foreach (u, v) in (V):
12           cesta[u][v] := min(cesta[u][v], cesta[u][k] + cesta[k][v])
\end{Verbatim}

Asymptotická èasová slo¾itost algoritmu je stejná jako u~Dijkstrova algoritmu, tzn. \ensuremath{\Theta(n^3)}. Algoritmus podobnì jako prohledávání do ¹íøky a do hloubky nezohledòuje hodnocení hran, ale øídí se pouze strukturou grafu. V~ka¾dé iteraci se pro ka¾dý uzel grafu spoèítá cena cesty do uzlu, který je o~jednu hranu dále.

% ------------------------   
% Section 
\section{Dijkstrùv algoritmus}
\label{id4746389}\hypertarget{id4746389}{}%

Na rozdíl od Floyd--Warshallova algoritmu, poèítá tento algoritmus nejkrat¹í cesty v~grafu pouze mezi poèáteèním uzlem {\texttt{{s}}} a v¹emi ostatními. Datové struktury, je¾ algoritmus vyu¾ívá jsou pole {\texttt{{d}}}, kam se ukládají vzdálenosti z~{\texttt{{s}}}, a prioritní fronta\label{id4746420}\begingroup\catcode`\#=12\footnote{
Prioritní fronta mù¾e být navr¾ena jako binární halda a výbìr minimálního prvku má potom konstantní slo¾itost.
}\endgroup\docbooktolatexmakefootnoteref{id4746420}. Funkce {\texttt{{extractMin(N)}}} aplikovaná na dosud nenav¹tívené vrcholy vyjme z~fronty vrchol s~nejkrat¹í vzdáleností od {\texttt{{s}}}. Prioritní fronta proto musí být implementována s~uspoøádáním {\texttt{{u}}} \ensuremath{<} {\texttt{{v}}} \ensuremath{\Longleftrightarrow} {\texttt{{d[u]}}} \ensuremath{<} {\texttt{{d[v]}}}. Pro ka¾dý vrchol {\texttt{{v}}} sousedící s~vrcholem {\texttt{{u}}} vybraného z~fronty se napoèítá jeho vzdálenost, pokud je dosavadní vzdálenost z~poèátku vìt¹í ne¾ vzdálenost z~poèáteèního uzlu {\texttt{{s}}} do uzlu {\texttt{{u}}} ({\texttt{{d[u]}}}) seèteno s~cenou hrany mezi {\texttt{{u}}} a {\texttt{{v}}}. Pokud sousedící uzel {\texttt{{v}}} je¹tì nebyl nav¹tíven, hodnota {\texttt{{d[v]}}} \ensuremath{=} \ensuremath{\infty} . Toho je zaji¹tìno v~inicializaci algoritmu.

\begin{Verbatim}[fontsize=\small]
Pseudokód
 1  procedure Dijkstra(V, E, s):
 2     for each vertex v in E:      // Inicializace
 3        d[v] := infinity          // Zatím neznámá vzdálenost z s do v
 4        d[s] := 0                 // Vzdálenost z s do s
 5        N := V                    // V¹echny dosud nenav¹tívené vrcholy
 6
 7     while N is not empty:        // Samotný algoritmus
 8        u := extractMin(N)        // Vyjme nejlep¹í vrchol
 9        for each neighbor v of u:
10          alt := d[u] + cenaHrany(u, v)
11          if alt < d[v]              
12             d[v] := alt
\end{Verbatim}

Algoritmus tedy postupnì nav¹tìvuje nejménì vzdálené (vzdálenost není poèet pro¹lých hran) uzly z~poèáteèního vrcholu a ka¾dá iterace pøedstavuje pomyslnou vlnu ¹íøící se z~poèáteèního uzlu.

% -------------------------------------------------------------
% Chapter Analýza 
% ------------------------------------------------------------- 	
\chapter{Analýza}
\label{id4746629}\hypertarget{id4746629}{}%

% ------------------------   
% Section 
\section{Specifikace}
\label{id4746635}\hypertarget{id4746635}{}%

Systém bude zohledòovat tarifní zóny a informovat u¾ivatele o~dostupných jízdenkách. Aplikace bude implementována na platformì Java ME, bude splòovat specifikace MIDP 2.0 a CLDC 1.1 a bude otestována alespoò na pøíslu¹ných emulátorech. U¾ivatel bude mít mo¾nost zobrazit si jízdní øád jednotlivých linek na zastávce pro daný den.

% ------------------------   
% Section 
\section{Zpùsob ukládání dat}
\label{id4746656}\hypertarget{id4746656}{}%

Po dohodì s~Vladimírem Dopitou z~IDS JMK mi byla poskytnuta data v~textové podobì. Souèasnì tak byla zaji¹tìna budoucnost projektu. Data byla vygenerována z~ji¾ existujícího systému, který slou¾í øidièùm linek. Více o~formátu tìchto dat bude uvedeno v~sekci \hyperlink{sec0601}{{\ref{sec0601}}}. Bylo potøeba zajistit zpùsob, jak je mo¾no data dostat do aplikace. Po zvá¾ení v¹ech výhod a nevýhod probraných vý¹e, jsem zvolil cestu ukládání dat do souborù (resources).

Toto øe¹ení se sebou nese problém aktualizace dat novìj¹í verzí v~pøípadì zmìny v~jízdních øádech. Proto je k~mobilní aplikaci dodávána i desktop aplikace, která je podrobnìji probrána v~následující kapitole.

% ------------------------   
% Section 
\section{Vyhledávání spojù}
\label{id4746700}\hypertarget{id4746700}{}%

Termínem \glqq spoj\textquotedblleft{} oznaèuji cestu mezi dvìma a více zastávkami. V~teorii grafù má tento termín obraz \glqq cesta grafem\textquotedblleft{}. Budu je¹tì rozli¹ovat spoj jedné linky a spoj více linek (mo¾né pøestupy), pokud nebude význam z~kontextu zøejmý.

Problém hledání spoje ze zastávky A~do zastávky B v~dopravní síti lze redukovat na problém hledání nejkrat¹í cesty v~grafu z~uzlu X do uzlu Y. Hrana z~uzlu X do uzlu Y vede právì tehdy, kdy¾ existuje linka, která projí¾dí zastávkami A~a B bezprostøednì za sebou. Hrana musí být orientovaná, proto¾e existují linky, jejich¾ \glqq zpáteèní\textquotedblleft{} trasa není stejná jako ta \glqq prvotní\textquotedblleft{}\label{id4746745}\begingroup\catcode`\#=12\footnote{
Napøíklad linka, která jezdí v~kruhu.
}\endgroup\docbooktolatexmakefootnoteref{id4746745}. Ohodnocení hran je slo¾itìj¹í.
\subsection{Ohodnocení hran}
\label{id4746757}\hypertarget{id4746757}{}%

Nabízí se hodnotit hrany grafu (tj. modelu dopravní sítì) mezi uzly X a Y hodnotou èasu, který potøebuje linka, aby dojela ze zastávky A~do zastávky B, a nad takovýmto grafem vyhledávat. Toto hodnocení hran v¹ak nezohledòuje dynamiènost celého modelu. Linka nemusí jet ze zastávky hned. Tuto dobu je nutno pøipoèítat k~dobì pøejezdu ze zastávky do zastávky. Rovnì¾ je vhodné hodnotit hranu i èíslem linky, aby se zamezilo zbyteèným pøestupùm z~jedné linky na druhou, jedou-li rùzné linky ve stejnou dobu na stejné trase.

% ------------------------   
% Section 
\section{Shrnutí}
\label{id4746789}\hypertarget{id4746789}{}%

Z~tìchto poznatkù jsem vyvodil, ¾e pou¾iji silnì modifikovanou verzi Dijkstrova algoritmu. Zùstane z~nìj akorát my¹lenka \glqq rozbalování\textquotedblleft{} nejlacinìj¹ích uzlù jako prvních. To zajistí, ¾e v~dané fázi výpoètu budou prohledány v¹echny uzly s~men¹í nebo rovnou cenou ne¾ právì aktuální uzel. Algoritmus mù¾e hledat efektivnìji, spojíme-li ho s~vhodnou heuristikou. Nabízí se dvì øe¹ení.

\begin{itemize}
%--- Item
\item 
Vyu¾ít znalosti geografické pozice zastávek a upøednostòovat uzly, které jsou ve smìru cílové zastávky. Tato informace bohu¾el není v~datech dostupná.

%--- Item
\item 
Dálnièní hierarchie. Heuristika inspirovaná velkými mapami. Je-li k~dispozici informace, ve které èásti grafu se poèáteèní a koncový uzel nacházejí, mù¾e se vytvoøit pomyslný graf na vy¹¹í úrovni a spojit tyto èásti (nyní u¾ uzly nového grafu) hranami, tzv. dálnicemi. Uvnitø èástí pak vyhledávat klasicky. Toto øe¹ení je vhodné spí¹e pro aplikace obhospodaøující více klientù s~vìt¹ím mno¾stvím pamìti a výpoèetní síly (napø. cluster), proto¾e si mohou ukládat spoje mezi jednotlivými èástmi do cache pamìti.

\end{itemize}
\noindent 
Z~pamì»ových omezení platformy \hyperlink{omezeni}{{[7.2]}} vyplývá, ¾e je nereálné uchovávat celou reprezentaci grafu v~pamìti. Nicménì, je-li \glqq prohledávaný uzel\textquotedblleft{} zároveò uzel reprezentující cílovou stanici, mù¾e být hledání ukonèeno a je zaruèen správný výsledek. Pro nejhor¹í pøípady (ve smyslu nejvzdálenìj¹í cesty) bohu¾el mù¾e dojít k~ukonèení algoritmu z~dùvodu omezené velikosti pamìti daného mobilního zaøízení.

% -------------------------------------------------------------
% Chapter Konvertor dat 
% ------------------------------------------------------------- 	
\chapter{Konvertor dat}
\label{id4746892}\hypertarget{id4746892}{}%

Proto¾e data s~informacemi o~linkách dodaná z~jiného systému jsou pøíli¹ obsáhlá a obsahují spoustu redundantních informací, je s~mobilní aplikací dodávána také desktopová aplikace, která zajistí konverzi dat z~vstupního formátu na formát, který podporuje mobilní aplikace. Tuto aplikaci budu oznaèovat jako konvertor.

Konvertor je aplikace napsaná v~Javì vyu¾ívající Swing(\hyperlink{obr}{{\ref{obr}}}). U¾ivatel v~ní nastaví cesty k~jednotlivým souborùm s~daty, cestu k~{\texttt{{jar}}} archivu mobilní aplikace, cílovou slo¾ku a pøípadnì úroveò filtru.

Filtr slou¾í ke sní¾ení velikosti výsledného {\texttt{{jar}}} archivu. Cenou za toto sní¾ení velikosti je vynechání nìkterých nepravidelných\label{id4746969}\begingroup\catcode`\#=12\footnote{
Nepravidelných je zde my¹leno tak, ¾e spoj linky nejede pøes svou obvyklou trasu.
}\endgroup\docbooktolatexmakefootnoteref{id4746969} tras\label{id4746980}\begingroup\catcode`\#=12\footnote{
Trasou rozumím uspoøádanou n-tici zastávek jedné linky.
}\endgroup\docbooktolatexmakefootnoteref{id4746980} linek. Tato my¹lenka vznikla, proto¾e dodaná data obsahují i spoje reprezentující linky jedoucí z, nebo do vozovny. Jedná se o~metodu {\texttt{{filter(int treshold)}}}, kde parametr {\texttt{{treshold}}} urèuje, kolikrát dennì nejménì musí linka jet trasu, aby byly informace o~trase a spojích linky na této trase zahrnuty do výstupních dat. Metoda se neaplikuje na vlaky a na noèní autobusy v~Brnì. Je-li filtr nastaven na hodnotu 0, filtrace se neprovádí. Do výstupních dat se rovnì¾ nepropustí informace o~\glqq neveøejných\textquotedblleft{} spojích, tj. o~spojích oznaèených pøíznakem {\texttt{{N}}}. Neveøejné spoje pøedstavují linky, které nenabírají pasa¾éry, ale jsou uvedeny ve vstupních datech.

Aplikace naète v¹echny soubory (kromì souborù se starými daty) z~{\texttt{{jar}}} archivu mobilní aplikace a vygeneruje z~nich nový {\texttt{{jar}}} archiv s~ji¾ konvertovanými daty. {\texttt{{Jar}}} archiv má toti¾ stejný formát jako soubor {\texttt{{zip}}} a v~Javì nechybí podpora pro práci se soubory {\texttt{{zip}}}. Tento postup vygeneruje spustitelnou aplikaci, proto¾e do pøelo¾ených {\texttt{{class}}} souborù není tøeba zasahovat a soubor {\texttt{{manifest.mf}}} zùstane stejný.

K~{\texttt{{jar}}} archivu je vygenerován i {\texttt{{jad}}} deskriptor, do nìho¾ je zapsána nová velikost {\texttt{{jar}}} archivu a verze midletu je inkrementována.

% ------------------------   
% Section 
\section{Formát vstupních dat}
\label{sec0601}\hypertarget{sec0601}{}%

Informace o~spojích a zastávkách jsou obsa¾eny v~devíti souborech. Velikost v¹ech tìchto souborù je dohromady 20,2 MB.

\begin{description}
% \null and \mbox are tricks to induce different typesetting decisions
\item[{Soubor zastávky.txt}]\null{}
Obsahuje identifikátory zastávek v~pùvodním systému, pøíznaky tarifních zón, názvy, a má-li zastávka více sloupkù, informace o~nich. Zastávek, kde jezdí linky IDS JMK, je dohromady 2430. Záznam jedné ze zastávek je znázornìn na obrázku \hyperlink{obr6.1}{{\ref{obr6.1}}}.
% \null and \mbox are tricks to induce different typesetting decisions
\item[{Soubor slu¾by.txt}]\null{}
Obsahuje informace o~spojích jednotlivých linek. Nejprve je uveden identifikátor dne platnosti a typ slu¾by\label{id4747152}\begingroup\catcode`\#=12\footnote{
Typ slu¾by je pøíznak, který urèuje, zda-li je linka typu tramvaj, trolejbus, autobus, nebo vlak.
}\endgroup\docbooktolatexmakefootnoteref{id4747152}, po nìm následuje výpis spojù, které v~daný den jezdí. Hlavièka výpisu spoje obsahuje identifikátor linky a tìlo identifikátory jednotlivých zastávek, kde linka zastavuje, a èasù. Èasy jsou dva, proto¾e zastávka mù¾e mít \glqq pobyt\textquotedblleft{}, kdy èeká na jiný spoj. Záznam jedné z~linek je znázornìn na obrázku \hyperlink{obr6.2}{{\ref{obr6.2}}}.
% \null and \mbox are tricks to induce different typesetting decisions
\item[{Soubory pátek.txt - nedìle.txt}]\null{}
Obsahují identifikátory platnosti slu¾eb, které urèují, která slu¾ba (mno¾ina spojù) v~daný den platí. Jízdní øády linek jsou toti¾ rùzné nejen pøes víkend a v~dobì svátku, ale mohou se li¹it i ve v¹ední dny. Toto platí zejména pro vlaky.
\end{description}
\noindent 

Vstupní formát dat je pevnì daný, a proto¾e je výstupem jiné aplikace, není tøeba nìjak dùkladnìji kontrolovat v¹emo¾né nekorektní vstupy. U¾ivatel by do tìchto souborù nemìl vùbec zasahovat.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{obr6.1}{}%
\begin{center}

{{\includegraphics[scale=0.6]{./Station}}\hypertarget{id4747239}{}%
\label{id4747239}
}
{{\caption[{Záznam se zastávkou Halasovo námìstí}]{{{Záznam se zastávkou Halasovo námìstí}}}\label{obr6.1}}}
\end{center}
\end{figure}

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{obr6.2}{}%
\begin{center}

{{\includegraphics[scale=0.6]{./Service}}\hypertarget{id4747280}{}%
\label{id4747280}
}
{{\caption[{Záznam se slu¾bou 001000102 a spojem linky 1}]{{{Záznam se slu¾bou 001000102 a spojem linky 1}}}\label{obr6.2}}}
\end{center}
\end{figure}

% ------------------------   
% Section 
\section{Formát výstupních dat}
\label{id4747292}\hypertarget{id4747292}{}%

Vzhledem k~omezením vyplývajícím z~platformy Java ME bylo potøeba objem dat co nejvíce redukovat a irelevantní informace odfiltrovat. Proto¾e vstupní data mají nízkou entropii, nebyl problém navrhnout formát lépe stravitelný pro mobilní zaøízení.

Specifikace CLDC 1.1 ani MIDP 2.0 nedefinují maximální velikost {\texttt{{jar}}} archivu aplikace. Toto omezení je zpùsobeno konkrétními typy mobilních zaøízení. Obecnì platí, ¾e èím je velikost men¹í, tím je aplikace z~tohoto hlediska kompatibilnìj¹í.

Výstupní data jsou generována do balíku {\texttt{{cz.muni.fi.mobileIDS.\_data}}}. Data sestávají ze dvou typù souborù.

\begin{itemize}
%--- Item
\item 
{\bfseries{Soubor stations}}

Soubor stations obsahuje identifikátory jednotlivých zastávek, zóny, názvy a linky, které na daných zastávkách zastavují. Pro oddìlování jednotlivých atributù jedné zastávky slou¾í znak {\texttt{{@}}}. (Nesmí se tedy vyskytovat v~názvu zastávky.) Pro oddìlování jednotlivých zastávek slou¾í znak s~ASCII kódem 10, tedy {\texttt{{line feed}}}.

%--- Item
\item 
{\bfseries{Soubor s~informacemi o~spojích dané linky}} - {\em{soubor linky}}

Mno¾ství vygenerovaných souborù linek\label{id4747394}\begingroup\catcode`\#=12\footnote{
Poèet souborù napøíklad pro pátek je, pou¾ije-li se nulová úroveò filtrace, 401
}\endgroup\docbooktolatexmakefootnoteref{id4747394} le¾í v~intervalu {\texttt{{\textless{}m,n\textgreater{}}}}, kde {\texttt{{m}}} znaèí poèet linek vynásobeno sedmi a {\texttt{{n}}} poèet linek vynásobeno ètrnácti. Pro ka¾dý den v~týdnu se toti¾ generují jiná data a linka mù¾e mít jeden nebo dva soubory v~závislosti na tom, zda má dvì rùzné pravidelné trasy. Jeden soubor s~informacemi tedy napøíklad mají linky, které jezdí v~kruhu, dva rùzné soubory linky jezdící stejnou trasu z~toèny na toènu. Tuto vlastnost linky budu oznaèovat jako {\em{smìr linky}}.

Smìr linky je urèen lince tak, ¾e je nejprve zji¹tìna vzorová trasa s~nejvíce jízdami (nejpravidelnìj¹í), potom podle porovnání poøadí zastávek ve zji¹»ované a vzorové trase, se trasa i s~èasy výjezdu umístí do správného souboru. Jeden soubor linky tak mù¾e a zpravidla i obsahuje více tras, proto¾e se trasa mù¾e mìnit ne tak \glqq dramaticky\textquotedblleft{}, aby byla nová trasa oznaèena jako smìr linky. Napøíklad pouze dvì zastávky se li¹í. Trasy jsou potom do souboru zapsány v~poøadí od nejfrekventovanìj¹í po nejménì frekventovanou.

Soubory linek jsou v¾dy pojmenovány identifikátorem linky se sufixem A~nebo B, znaèícím smìr linky, a jsou umístìny do balíku {\texttt{{cz.muni.fi.mobileIDS.\_data.XX}}}, kde {\texttt{{XX}}} znaèí den v~týdnu.

Samotný soubor linky má tento binární formát.

\begin{enumerate}
%--- Item
\item 
Na prvním bytu je ulo¾en typ slu¾by.

%--- Item
\item 
A¾ do bytu s~hexadecimální hodnotou {\texttt{{81}}} jsou støídavì ukládány identifikátory sousedících zastávek a èas v~minutách potøebný k~pøejezdu mezi dvìma sousedními zastávkami. ID zastávky je ukládáno na dva byty a èas na jeden. Tento øetìzec bytù definuje jednu trasu linky.

%--- Item
\item 
Mezi bytem {\texttt{{81}}} a {\texttt{{FE}}} se nachází výèet výjezdù linky z~první zastávky na trase. Èas je ukládán jako poèet minut od pùlnoci a je zakódován na dva byty.

%--- Item
\item 
Za bytem {\texttt{{FE}}} následuje dal¹í trasa, tedy opìt postupnì body è. 2, 3, 4, dokud není dosa¾en konec souboru.

\end{enumerate}
\noindent 
\end{itemize}
\noindent 
Velikost výsledných dat je 387 kB pøi stupni filtrace nastaveném na 10, tedy filtraci, kdy nejsou zahrnuty trasy linek, které nejsou typu vlak nebo noèní autobusová linka, a které nemají alespoò 10 jízd. V~pøípadì bez filtrace je velikost 1,1 MB. Nemá-li linka ¾ádnou trasu, proto¾e jí byli v¹echny odfiltrovány, není soubor této linky vùbec vytvoøen a v~souboru {\texttt{{stations}}} se neobjeví ID linky u~zastávek, na kterých by mìla linka zastavovat.

% -------------------------------------------------------------
% Chapter Vyhledávaè 
% ------------------------------------------------------------- 	
\chapter{Vyhledávaè}
\label{id4747580}\hypertarget{id4747580}{}%

Data, která vyprodukovala aplikace Konvertor, slou¾í mobilní aplikaci, o~ní¾ je tato kapitola.

% ------------------------   
% Section 
\section{Kompatibilita}
\label{sec0701}\hypertarget{sec0701}{}%

Specifikace, které jsou souèástí Javy ME, jsou velmi benevolentní a je v~nich spousta doporuèení na implementaci. Implementace rùzných výrobcù mobilních zaøízení se tak li¹í. Aplikace se proto mù¾e chovat na rùzných zaøízeních rùznì.

Aby byla zaruèena co nejvìt¹í kompatibilita s~co nejvíce typy zaøízení, je nutné psát aplikace takové, aby velikost výsledného {\texttt{{jar}}} archivu, po¾adavky na operaèní pamì» a velikost displeje zaøízení byly co nejmen¹í.

\hypertarget{omezeni}{}Na rozdíl od Javy SE a EE, kde hlavními po¾adavky na aplikace je znovupou¾itelnost kódu a snadná údr¾ba aplikací, je to v~Javì ME kompatibilita a rychlost. Je u¾iteèné si uvìdomit, ¾e øe¹ení psaná pro mobilní zaøízení nemohou být nasazena v~clusteru, ¾e ve vìt¹inì pøípadù není klientem firma, která bude vy¾adovat dodaný systém udr¾ovat a vylep¹ovat. Aplikace mívají znaènì omezené zdroje. Pøed ètyømi lety se pohybovala prùmìrná maximální velikost {\texttt{{jar}}} archivu podporovaná v~zaøízeních okolo 64 kB a velikost pamìti 210 kB\label{id4677210}\begingroup\catcode`\#=12\footnote{
Tyto údaje platí konkrétnì pro telefon Nokia 3100 a 3120.
}\endgroup\docbooktolatexmakefootnoteref{id4677210} \docbooktolatexcite{[a]}{}, dnes u¾ je situace lep¹í a zaøízení zaèínají podporovat neomezenou\label{id4677227}\begingroup\catcode`\#=12\footnote{
Je samozøejmì omezena velikostí pamìti v~telefonu pro ukládání dat.
}\endgroup\docbooktolatexmakefootnoteref{id4677227} velikost spustitelného souboru, ale ne ka¾dý vlastní nejnovìj¹í telefon. Má-li aplikace fungovat i na tìchto starých zaøízeních, je potøeba sní¾it tyto hodnoty. Nìkteré techniky sni¾ování tìchto hodnot nejsou v~souladu s~principy ve standardní a enterprise edici Javy. Nìkolik pøíkladù.

\begin{itemize}
%--- Item
\item 
Jakýkoli framework pøedstavuje re¾ii navíc.

%--- Item
\item 
MVC není prioritou.

%--- Item
\item 
Dr¾et objekty v~pamìti jen na dobu potøebnì nutnou.

%--- Item
\item 
Zvá¾it pou¾ití nemìnitelných tøíd \docbooktolatexcite{[3]}{}.

%--- Item
\item 
Udr¾ovat poèet tøíd na rozumné úrovni.

%--- Item
\item 
Pou¾ívat profiler a memory monitor, je¾ jsou souèástí Sun Java Wireless Toolkit.

%--- Item
\item 
Pou¾ívat obfuskátor.

\end{itemize}
\noindent 
Obfuskátor zabrání mo¾né dekompilaci tøíd z~tzv. bytecode podoby do èitelné podoby. Chrání tak know-how, a zároveò sní¾í velikost výsledného souboru.

Velikost spustitelného {\texttt{{jar}}} archivu (data s~filtrací stupnì dva) mobilní aplikace, je¾ je souèástí této práce, je po obfuskaci 730,4 kB, nicménì lze sní¾it zvý¹ením filtrace a¾ pod 500 kB. ©íøka displeje by mìla být pro správné zobrazení spojù alespoò 130 pixelù a rozumná velikost operaèní pamìti je alespoò 1 MB.

Aplikace vyu¾ívá vysokoúrovòového API pro tvorbu u¾ivatelského rozhraní. To zaruèuje, ¾e aplikace bude fungovat na v¹ech pøístrojích správnì, ale mù¾e vypadat jinak. Ka¾dý výrobce si toti¾ implementuje formuláøové prvky jinak. Výhodou tohoto øe¹ení jsou i implementované formuláøové prvky jako {\texttt{{DateField}}}, pro výbìr èasu, podpora pro textový vstup od u¾ivatele do prvku {\texttt{{TextField}}} nebo podpora pro stylus.

Nízkoúrovòové API, sice dovoluje více, proto¾e dovoluje kreslit grafiku na plátno (tøída {\texttt{{Canvas}}}), ale napøíklad textový vstup od u¾ivatele by musel být øe¹en na úrovni událostí, je¾ klávesy zaøízení vyvolávají. Problém by potom byl napøíklad se znakem mezery, která je na rùzných zaøízeních na jiné klávese, nebo u~zaøízení s~kompletní klávesnicí.

% ------------------------   
% Section 
\section{Pøípady u¾ití}
\label{id4747975}\hypertarget{id4747975}{}%

Pøípady u¾ití má aplikace dva. Ní¾e jsou textovì popsány a zaneseny do diagramu.

\begin{enumerate}
%--- Item
\item 
{\bfseries{UC Vyhledávání}}

\begin{itemize}
%--- Item
\item 
U¾ivatel spustí midlet {\texttt{{Vyhledavac.}}}

%--- Item
\item 
Název poèáteèní a cílové zastávky jsou doplnìny hodnotami z~pøedchozího spu¹tìní midletu.

%--- Item
\item 
Nevyhovují-li stávající hodnoty, vyplní nové.

\begin{itemize}
%--- Item
\item 
Vyplní poèáteèní zastávku.

\begin{itemize}
%--- Item
\item 
Aplikace \glqq na¹eptává\textquotedblleft{} ty vhodné.

\end{itemize}
\noindent 

%--- Item
\item 
Vyplní cílovou zastávku.

\begin{itemize}
%--- Item
\item 
Aplikace \glqq na¹eptává\textquotedblleft{} ty vhodné.

\end{itemize}
\noindent 

%--- Item
\item 
Zvolí èas, pokud nevyhovuje aktuální.

\end{itemize}
\noindent 

%--- Item
\item 
Zvolí pøíkaz {\texttt{{Vyhledat.}}}

\begin{itemize}
%--- Item
\item 
Pokud na øetìzec zaèíná alespoò jedna skuteèná zastávka, je vybrána ta podle abecedy první. To platí pro oba øetìzce.

%--- Item
\item 
Mají-li oba øetìzce svùj obraz mezi skuteènými zastávkami, spustí se hledání.

\begin{itemize}
%--- Item
\item 
Probìhlo-li hledání neúspì¹nì, vypí¹e hlá¹ení \glqq Spoj nebyl nalezen.\textquotedblleft{}.

%--- Item
\item 
Probìhlo-li hledání úspì¹nì, zobrazí se výpis spoje a pøidá se pøíkaz {\texttt{{Detaily}}}.

\begin{itemize}
%--- Item
\item 
U¾ivatel zvolí pøíkaz {\texttt{{Detaily}}}, jsou mu zobrazeny podrobnìj¹í informace o~spoji.

\end{itemize}
\noindent 
\end{itemize}
\noindent 

%--- Item
\item 
Pokud na alespoò jeden z~øetìzcù, zadaných jako názvy zastávek, nezaèíná ¾ádná skuteèná zastávka, je u¾ivatel upozornìn hlá¹ením \glqq XX zastávka neexistuje.\textquotedblleft{}.

\end{itemize}
\noindent 
\end{itemize}
\noindent 

%--- Item
\item 
{\bfseries{UC Zobrazení jízdního øádu}}

\begin{itemize}
%--- Item
\item 
U¾ivatel spustí midlet {\texttt{{Jizdni rady.}}}

%--- Item
\item 
Vyplní hodnoty.

\begin{itemize}
%--- Item
\item 
Vyplní linku.

\begin{itemize}
%--- Item
\item 
Existuje-li linka, jsou doplnìny zastávky a smìr.

\end{itemize}
\noindent 

%--- Item
\item 
Jsou-li zastávky a smìr vyplnìny, u¾ivatel z~nich vybere.

\end{itemize}
\noindent 

%--- Item
\item 
Zvolí pøíkaz {\texttt{{Zobrazit}}}.

\begin{itemize}
%--- Item
\item 
Jsou-li hodnoty vyplnìny správnì, je mu zobrazen jízdní øád.

%--- Item
\item 
Nejsou-li hodnoty vyplnìny správnì, je upozornìn.

\end{itemize}
\noindent 
\end{itemize}
\noindent 
\end{enumerate}
\noindent 
% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{id4748357}{}%
\begin{center}

{{\includegraphics[scale=0.45]{./UseCase}}\hypertarget{id4748367}{}%
\label{id4748367}
}
{{\caption[{Use case diagram}]{{{Use case diagram}}}\label{id4748357}}}
\end{center}
\end{figure}

% ------------------------   
% Section 
\section{Schéma a implementace}
\label{id4748381}\hypertarget{id4748381}{}%

Aplikace sice nedodr¾uje model MVC, proto¾e vrstva view vyu¾ívá nìkteré metody tøíd {\texttt{{LineUtils}}} a {\texttt{{StationUtils}}} k~pøekládání identifikátorù na názvy. Nicménì toto poru¹ení není tak dramatické a na schématu je pro lep¹í pochopení aplikace znázornìna jako MVC. Pro jednoduchost nejsou do diagramu zaneseny také metody netýkající se aplikaèní logiky aplikace.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{id4748412}{}%
\begin{center}

{{\includegraphics[scale=0.45]{./SystemDiagram}}\hypertarget{id4748424}{}%
\label{id4748424}
}
{{\caption[{Diagram celé aplikace}]{{{Diagram celé aplikace}}}\label{id4748412}}}
\end{center}
\end{figure}

\subsection{Midlety}
\label{id4748437}\hypertarget{id4748437}{}%

Sada midletù mobilní aplikace sestává ze dvou midletù. {\texttt{{TimeTableMidlet}}} a {\texttt{{SearchMidlet}}}, souèástí tìchto tøíd jsou vnoøené tøídy dìdící od tøídy {\texttt{{Thread}}}.

\begin{itemize}
%--- Item
\item 
{\bfseries{SearchThread}} Probíhá v~nìm hledání spojù.

%--- Item
\item 
{\bfseries{TimeTableThread}} Probíhá v~nìm vyhledání jízdního øádu.

\end{itemize}
\noindent 
Tyto dvì tøídy midletù ovládají tok aplikace. Midlet {\texttt{{SearchMidlet}}} obsahuje navíc vnoøené vlákno {\texttt{{LoadSettingsThread}}}, které je spou¹tìno pøi startu midletu a vyplní názvy zastávek názvy z~pøedchozího bìhu aplikace. Názvy jsou ulo¾eny ve skladi¹ti záznamù. Zadá-li u¾ivatel nìkterý z~pøíkazù, je událost zpracována právì v~tìchto midletech. To proto, ¾e midlety implementují rozhraní {\texttt{{CommandListener}}} a jsou navì¹eny na formuláøe, je¾ ovládají.
\subsection{Formuláøe}
\label{id4748526}\hypertarget{id4748526}{}%

Základní tøídou, od které dìdí v¹echny tøídy slou¾ící pro zobrazování informací, je pro vysokoúrovòové API tøída {\texttt{{Form}}}. Formuláøe {\texttt{{ChooseTimeTableForm}}}, {\texttt{{TimeTableForm}}} jsou pøihlá¹eny ke tøídì {\texttt{{TimeTableMidlet}}} a formuláøe {\texttt{{SearchForm}}}, {\texttt{{WaitForm}}}, {\texttt{{ResultForm}}} a {\texttt{{DetailsForm}}} jsou pøihlá¹eny ke tøídì {\texttt{{SearchMidlet}}}. Formuláøe pro výbìr jízdního øádu a pro hledání spoje mají navíc {\texttt{{ItemStateListenery}}} {\texttt{{ChooseTimeTableFormListener}}} a {\texttt{{SearchFormListener}}} kvùli doplòování názvù. Tyto listenery jsou notifikovány, nastane-li zmìna na prvcích formuláøe. Listenery spou¹tí vlákna {\texttt{{StationsOnLineCompletion}}} a {\texttt{{StationCompletionThread}}}, díky nim¾ je obrazovka displeje neustále pøipravená k~interakci.

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{id4748634}{}%
\begin{center}

{{\includegraphics[scale=0.45]{./ViewDiagram}}\hypertarget{id4748645}{}%
\label{id4748645}
}
{{\caption[{Class diagram view vrstvy}]{{{Class diagram view vrstvy}}}\label{id4748634}}}
\end{center}
\end{figure}

\subsection{Aplikaèní logika}
\label{id4748658}\hypertarget{id4748658}{}%

K~datùm pøistupují tøídy {\texttt{{LineUtils}}} a {\texttt{{StationUtils}}}, mù¾eme na nì nahlí¾et jako na DAO objekty, proto¾e adaptují tì¾kopádný pøístup k~datùm pøes proudy (streamy) na pøijatelnìj¹í rozhraní, vracející u¾ hotové instance doménových tøíd. Obì tøídy jsou navr¾eny podle návrhového vzoru Singleton \docbooktolatexcite{[5]}{}.

Doménové tøídy pøedstavují tøídy {\texttt{{Station}}}, její¾ instance reprezentují zastávky, {\texttt{{Line}}} pro linky a tøída {\texttt{{Step}}}, její¾ instance slou¾í pro uchovávání si informací o~spoji.

Hledání probíhá ve tøídì {\texttt{{Searcher}}}, pøesnìji ve vláknì {\texttt{{SearchThread}}}, které si vytvoøí instanci tøídy {\texttt{{Searcher}}}. Algoritmus implementuje my¹lenku z~Dijkstrova algoritmu. Vyu¾ívá tøíd {\texttt{{LineUtils}}} a {\texttt{{StationUtils}}} k~pøístupu k~datùm. {\texttt{{Vector linePool}}} slou¾í jako cache pamì» mezi relativnì drahými operacemi na otvírání, ètení a zavírání souborù. {\texttt{{Hashtable stations}}} je kolekce pro ukládání doposud napoèítaných vzdáleností (tedy èasù od poèáteèní zastávky) do nav¹tívených zastávek.

Nebudu-li zbyteènì zabíhat do detailù, tak algoritmus v~ka¾dém kroku vybere zastávku s~nejmen¹í vzdáleností. Pro v¹echny její linky, které je¹tì nejsou v~kolekci {\texttt{{linePool}}} (tzn. nová linka a mo¾ný pøestup), a pro linku, její¾ identifikátor se shoduje s~identifikátorem linky zastávky (znaèí, kterou linkou jsme pøijeli na zastávku), ohodnotí a ulo¾í sousední zastávky. Obsahuje i mechanizmus na vypoøádávání se se smìry linek.

% -------------------------------------------------------------
% Chapter Závìr 
% ------------------------------------------------------------- 	
\chapter{Závìr}
\label{ch06}\hypertarget{ch06}{}%

Platforma Java ME je navr¾ena zejména pro aplikace vyu¾ívající ke své èinnosti sí». Aplikaèní logika je tak pøesunuta na jiné místo a mobilní aplikace jen vyu¾ívá její slu¾by. Toto øe¹ení si ¾ádá platit poplatky za informaèní kanál. Tvorba u¾iteèných offline aplikací je kvùli omezeným pamì»ovým prostøedkùm ztí¾ená, nicménì mo¾ná.

Úèelem této práce bylo vytvoøit aplikaci, která hledá spoje v~dopravní síti. Výsledná aplikace má jednoduché a intuitivní ovládání a je u¾iteèná v~pøípadì, ¾e potøebujeme efektivnìji cestovat veøejnou dopravou. Aplikace není nijak tìsnì závislá na obsahu dat, proto lze pøi dodr¾ení formátu vyu¾ívat aplikaci i pro jiné mìsta. Aplikace byla otestována na emulátorech Nokia a Sony Ericsson. V~souèasné dobì vzniká internetová verze v~rámci projektu do pøedmìtu PA165. Ta bude poskytovat slu¾bu vyhledávání pomocí webových slu¾eb, proto je mo¾né vytvoøit jednoduchou mobilní aplikaci, která tìchto slu¾eb bude vyu¾ívat, a zajistit tak centralizovanost a aktuálnost dat za cenu investice ze strany klientù do poplatkù za informaèní kanál.
% ------------------------------------------- 
%
%  Bibliography - chapter
%
% ------------------------------------------- 
\begin{thebibliography}{123}\hypertarget{id4748836}{}

% ............. biblioentry 
\bibitem{[1]}\docbooktolatexbibaux{id4748838}{[1]}
\hypertarget{id4748838}{}
Topley, K.: \emph{J2ME v~kostce}, Grada Publishing, 2004, 80-247-0426-9. 

% ............. biblioentry 
\bibitem{[2]}\docbooktolatexbibaux{id4748874}{[2]}
\hypertarget{id4748874}{}
White, J. a Hemphill, D. a Manning, D.: \emph{Java 2 Micro Edition: Java in small things}, Manning Publications, 2002, 0-7695-1050-7. 

% ............. biblioentry 
\bibitem{[3]}\docbooktolatexbibaux{id4748940}{[3]}
\hypertarget{id4748940}{}
Bloch, J.: \emph{Java efektivnì - 57 zásad softwarového experta}, Grada Publishing, 2002, 80-247-0416-1. 

% ............. biblioentry 
\bibitem{[4]}\docbooktolatexbibaux{id4748978}{[4]}
\hypertarget{id4748978}{}
Fowler, M.: \emph{Refaktoring - Zlep¹ení existujícího kódu}, Grada Publishing, 2003, 80-247-0299-1. 

% ............. biblioentry 
\bibitem{[5]}\docbooktolatexbibaux{id4749016}{[5]}
\hypertarget{id4749016}{}
Freeman, E. a Sierra, K. a Bates, B.: \emph{Head First Design Patterns}, O'Reilly, 2004, 0-596-00712-4. 

% ............. biblioentry 
\bibitem{[6]}\docbooktolatexbibaux{id4749077}{[6]}
\hypertarget{id4749077}{}
Collins-Sussman, B. a Fitzpatrick, B. a Pilato, M.: \emph{Version Control with Subversion}, Ben Collins-Sussman, Brian W. Fitzpatrick, C. Michael
        Pilato, 0-596-00448-6, 2007. 

% ............. biblioentry 
\bibitem{[7]}\docbooktolatexbibaux{id4749139}{[7]}
\hypertarget{id4749139}{}
Ortiz, E.: \emph{Introduction to OTA Application Provisioning}, 2002, Dostupný z~URL {\textless}\url{http://developers.sun.com/mobility/midp/articles/ota/}{\textgreater} (prosinec, 2007). 

% ............. biblioentry 
\bibitem{[8]}\docbooktolatexbibaux{id4749180}{[8]}
\hypertarget{id4749180}{}
\emph{MID Profile}, 2006, Dostupný z~URL {\textless}\url{http://java.sun.com/javame/reference/apis/jsr118/}{\textgreater} (prosinec, 2007). 

% ............. biblioentry 
\bibitem{[9]}\docbooktolatexbibaux{id4749208}{[9]}
\hypertarget{id4749208}{}
\emph{JSR--000118 Mobile Information Device Profile 2.0}, 2004, Dostupný z~URL {\textless}\url{http://jcp.org/aboutJava/communityprocess/final/jsr118/}{\textgreater} (prosinec, 2007). 

% ............. biblioentry 
\bibitem{[a]}\docbooktolatexbibaux{id4749238}{[a]}
\hypertarget{id4749238}{}
\emph{J2ME Polish: MIDP/2.0 Devices}, Dostupný z~URL {\textless}\url{http://www.j2mepolish.org/devices/platform_MIDP_2.0.html}{\textgreater} (prosinec, 2007). 

% ............. biblioentry 
\bibitem{[b]}\docbooktolatexbibaux{id4749262}{[b]}
\hypertarget{id4749262}{}
\emph{Android}, Dostupný z~URL {\textless}\url{http://code.google.com/android/}{\textgreater} (prosinec, 2007). 

\end{thebibliography}
\addcontentsline{toc}{chapter}{Literatura}

\newcommand{\dbappendix}[1]{\chapter{#1}}%
% ------------------------------------------------------------- 
% Appendices start here
% -------------------------------------------------------------
\appendix

% -------------------------------------------------------------
% appendix:  Podoba aplikací 
% ------------------------------------------------------------- 	
\dbappendix{Podoba aplikací}
\label{appA}\hypertarget{appA}{}%

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{obr}{}%
\begin{center}

{{\includegraphics[scale=0.45]{./Converter}}\hypertarget{id4749329}{}%
\label{id4749329}
}
{{\caption[{Aplikace Konvertor}]{{{Aplikace Konvertor}}}\label{obr}}}
\end{center}
\end{figure}

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{id4749340}{}%
\begin{center}

{{\includegraphics[scale=0.5]{./Searcher}}\hypertarget{id4749352}{}%
\label{id4749352}
}
{{\caption[{Midlet pro vyhledávání}]{{{Midlet pro vyhledávání}}}\label{id4749340}}}
\end{center}
\end{figure}

% figure ------------------------------------------------------
\begin{figure}[hbt]
\hypertarget{id4749363}{}%
\begin{center}

{{\includegraphics[scale=0.5]{./TimeTables}}\hypertarget{id4749375}{}%
\label{id4749375}
}
{{\caption[{Midlet pro zobrazení jízdních øádù}]{{{Midlet pro zobrazení jízdních øádù}}}\label{id4749363}}}
\end{center}
\end{figure}

% -------------------------------------------------------------
% appendix:  Obsah CD 
% ------------------------------------------------------------- 	
\dbappendix{Obsah CD}
\label{id4749389}\hypertarget{id4749389}{}%

Souèástí práce je pøilo¾ené CD, které obsahuje obì popsané aplikace ve formì projektù pro IDE Netbeans 6.0, data se zastávkami a spoji linek, dokumentaci ve formátu Javadoc pro mobilní aplikaci a tuto bakaláøskou práci ve formátech pdf, html, DocBook a \ensuremath{\LaTeX}.

\end{document}

